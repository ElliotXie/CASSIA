---
title: Quality Scoring
---

Quality scoring helps evaluate the reliability of cell type annotations. CASSIA provides automated scoring functionality through the `runCASSIA_score_batch` function, which analyzes the reasoning and evidence behind each annotation.

### Running Quality Scoring

```python
# Run quality scoring
CASSIA.runCASSIA_score_batch(
    input_file = output_name + "_full.csv",
    output_file = output_name + "_scored.csv",
    max_workers = 6,
    model = "openai/gpt-5.1",
    provider = "openrouter"
)
```

### Parameter Details

- **`input_file`**: Path to the full annotation results CSV file (generated by `runCASSIA_batch`).
- **`output_file`**: The name for the output scored results CSV file.
- **`max_workers`**: Number of parallel scoring threads.
- **`model`**: The LLM used for quality scoring. High-capability models like `claude-4.5-sonnet` or `gpt-4o` are recommended for accurate scoring.
- **`provider`**: The API provider for the model (e.g., "openrouter").

### Interpreting Scores

- **90-100**: High confidence, strong evidence.
- **76-89**: Good confidence, adequate evidence.
- **<75**: Low confidence. These clusters are candidates for further analysis using the Annotation Boost Agent or Compare Agent.

### Report Generation

Generate detailed reports from your analysis. This step typically follows after quality scoring. The score report includes all outputs from CASSIA, including structured outputs, conversation histories, and quality scores.

```python
# Generate quality report
CASSIA.runCASSIA_generate_score_report(
    csv_path = output_name + "_scored.csv",
    index_name = output_name + "_report.html"
)
```

### Parameter Details

- **`csv_path`**: Path to the scored results CSV file (e.g., "my_annotation_scored.csv").
- **`index_name`**: The name for the generated report index file (e.g., "my_report.html").

_Generates individual reports and an index page from the scored results._

### Alternative Report Generation Functions

CASSIA also provides standalone report generation functions that can create HTML reports from any batch results:

#### Generate from CSV File

```python
from CASSIA.reports.generate_batch_report import generate_batch_html_report

# Generate HTML report from CSV file
output_path = generate_batch_html_report(
    full_csv_path="batch_results_full.csv",
    output_path="my_report.html",
    report_title="CASSIA Analysis Report"
)
```

#### Generate from Data

```python
from CASSIA.reports.generate_batch_report import generate_batch_html_report_from_data

# Generate HTML report from data directly
output_path = generate_batch_html_report_from_data(
    rows=results_list,  # List of dictionaries
    output_path="my_report.html",
    report_title="CASSIA Analysis Report"
)
```

These functions create self-contained HTML reports with:
- Interactive search functionality
- Filter dropdowns for cell types
- Modal popups for detailed views
- Embedded CSS and JavaScript
