{
  "timestamp": "2025-11-27T19:43:31.589931",
  "total_duration": 312.55,
  "summary": {
    "passed": 10,
    "failed": 6,
    "errors": 0,
    "skipped": 0
  },
  "results": [
    {
      "name": "01_single_annotation",
      "status": "failed",
      "returncode": 1,
      "duration": 5.5,
      "stdout": "\n============================================================\n  CASSIA TEST: 01 - Single Cluster Annotation\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash\n  Tissue: large intestine\n  Species: human\n\nTesting single annotation for: plasma cell\nUsing top 30 markers\nLoaded 30 markers\nResults will be saved to: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\01_single_annotation\\results\\20251127_193823\n\nRunning runCASSIA...\n\nError: CASSIA Validation Error: Invalid type for marker list. Expected list of strings or comma-separated string, got DataFrame.\n  Parameter: marker_list\n  Received: 'DataFrame'\n\n[X] Test FAILED\n    Duration: 0.00s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "02_batch_annotation",
      "status": "passed",
      "returncode": 0,
      "duration": 19.14,
      "stdout": "ch Analysis \u2827\n\u001b[K[\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 0%\n\u001b[KCompleted: 0 | Processing: 2 | Pending: 0\n\u001b[KActive: plasma cell, monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2807\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280f\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280b\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2819\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\02_batch_annotation\\results\\20251127_193828\\batch_results'.\nHTML report generated: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\02_batch_annotation\\results\\20251127_193828\\batch_results_report.html\nThree files have been created:\n1. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\02_batch_annotation\\results\\20251127_193828\\batch_results_full.csv (full data CSV)\n2. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\02_batch_annotation\\results\\20251127_193828\\batch_results_summary.csv (summary data CSV)\n3. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\02_batch_annotation\\results\\20251127_193828\\batch_results_report.html (interactive HTML report)\n\nBatch Results:\n  Clusters annotated: 2/2\n  Output files created:\n    - batch_results_full.csv\n    - batch_results_summary.csv\n\n[OK] Test PASSED\n    Duration: 14.21s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "03_validator_comparison",
      "status": "passed",
      "returncode": 0,
      "duration": 77.01,
      "stdout": "ASSIA Batch Analysis \u2834\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 83%\n\u001b[KCompleted: 5 | Processing: 1 | Pending: 0\n\u001b[KActive: intestinal enteroendocrine cell\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2826\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 83%\n\u001b[KCompleted: 5 | Processing: 1 | Pending: 0\n\u001b[KActive: intestinal enteroendocrine cell\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2827\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 83%\n\u001b[KCompleted: 5 | Processing: 1 | Pending: 0\n\u001b[KActive: intestinal enteroendocrine cell\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2807\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 83%\n\u001b[KCompleted: 5 | Processing: 1 | Pending: 0\n\u001b[KActive: intestinal enteroendocrine cell\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 6 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 6 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\03_validator_comparison\\results\\20251127_193848\\results_v1'.\nHTML report generated: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\03_validator_comparison\\results\\20251127_193848\\results_v1_report.html\nThree files have been created:\n1. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\03_validator_comparison\\results\\20251127_193848\\results_v1_full.csv (full data CSV)\n2. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\03_validator_comparison\\results\\20251127_193848\\results_v1_summary.csv (summary data CSV)\n3. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\03_validator_comparison\\results\\20251127_193848\\results_v1_report.html (interactive HTML report)\n  Annotated 6 clusters\n\n========================================\nComparison Results\n========================================\n  v0 (strict): 6 clusters\n  v1 (moderate): 6 clusters\n\n[OK] Test PASSED\n    Duration: 71.95s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "04_quality_scoring",
      "status": "passed",
      "returncode": 0,
      "duration": 11.85,
      "stdout": "cyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2838\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u283c\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2834\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2826\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2827\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2807\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280f\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280b\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hScoring completed. Results saved.\n\nSummary:\nTotal rows: 2\nSuccessfully scored: 2\nFailed/Skipped: 0\nHTML report generated: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\04_quality_scoring\\results\\20251127_194005\\scored_results_report.html\nHTML report generated: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\04_quality_scoring\\results\\20251127_194005\\scored_results_report.html\n\nScoring Results:\n  Clusters scored: 2\n  Average score: 96.5\n  Score range: 95 - 98\n\n[OK] Test PASSED\n    Duration: 6.45s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "05_model_settings",
      "status": "passed",
      "returncode": 0,
      "duration": 11.91,
      "stdout": "router' -> 'google/gemini-2.5-flash' (note)\n  [OK] 'flash' + 'openrouter' -> 'google/gemini-2.5-flash' (note)\n  [OK] 'sonnet' + 'anthropic' -> 'claude-sonnet-4-5' (note)\n  [OK] 'opus' + 'anthropic' -> 'claude-opus-4-5' (note)\n  [OK] 'haiku' + 'anthropic' -> 'claude-haiku-4-5' (note)\n  [OK] '4o' + 'openai' -> 'gpt-4o' (note)\n  [OK] 'deepseek' + 'openrouter' -> 'deepseek/deepseek-chat' (note)\n  [OK] 'GPT' + 'openai' -> 'gpt-5.1' (note)\n  [OK] 'Claude' + 'anthropic' -> 'claude-sonnet-4-5' (note)\n  [OK] 'gpt-4o' + 'openai' -> 'gpt-4o' (no note)\n  [OK] 'claude-sonnet-4-5' + 'anthropic' -> 'claude-sonnet-4-5' (no note)\n\nAlias tests: 15/15 passed\n\n========================================\nTesting Provider-Aware Resolution\n========================================\n  [OK] 'claude' + 'anthropic' -> 'claude-sonnet-4-5' (expected: claude-sonnet-4-5)\n  [OK] 'claude' + 'openrouter' -> 'anthropic/claude-sonnet-4.5' (expected: anthropic/claude-sonnet-4.5)\n  [OK] 'gpt' + 'openai' -> 'gpt-5.1' (expected: gpt-5.1)\n  [OK] 'gpt' + 'openrouter' -> 'openai/gpt-5.1' (expected: openai/gpt-5.1)\n\nProvider-aware tests: 4/4 passed\n\n========================================\nTesting get_available_aliases()\n========================================\n  [OK] get_available_aliases() returns correct structure\n  [OK] get_available_aliases('openai') filters correctly\n\nTotal resolution tests: 27/27 passed\n\n========================================\nTesting Recommended Model\n========================================\n  Recommended for openrouter: ('anthropic/claude-sonnet-4.5', 'openrouter')\n\n========================================\nTesting Practical Annotation with OpenRouter\n========================================\n  Model: google/gemini-2.5-flash\n  Provider: openrouter\n  Running annotation...\n  [X] ERROR: CASSIA Validation Error: Invalid type for marker list. Expected list of strings or comma-separated string, got DataFrame.\n  Parameter: marker_list\n  Received: 'DataFrame'\n\n[OK] Test PASSED\n    Duration: 0.02s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "06_annotation_boost",
      "status": "passed",
      "returncode": 0,
      "duration": 33.55,
      "stdout": "================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash\n  Tissue: large intestine\n  Species: human\nResults will be saved to: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\06_annotation_boost\\results\\20251127_194028\n\nUsing existing batch results: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\02_batch_annotation\\results\\20251127_193828\\batch_results_full.csv\n\nTesting annotation boost for: plasma cell\n\nRunning annotation boost...\n  Cluster: plasma cell\n  Model: google/gemini-2.5-flash\n  Provider: openrouter\n  Search strategy: breadth\n  Max iterations: 3 (reduced for testing)\nUsing summarization agent to process conversation history for cluster plasma cell\nConversation history summarized using openrouter (8865 -> 1379 characters)\nUsing conversation history for cluster plasma cell (mode: final, 1379 characters)\nIteration 1 completed.\nIteration 2 completed.\nIteration 3 completed.\nRaw conversation text saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\06_annotation_boost\\results\\20251127_194028\\boost_plasma_cell_raw_conversation.txt\nRaw conversation text saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\06_annotation_boost\\results\\20251127_194028\\boost_plasma_cell_raw_conversation.txt\nHTML report saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\06_annotation_boost\\results\\20251127_194028\\boost_plasma_cell_summary.html\nSummary report saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\06_annotation_boost\\results\\20251127_194028\\boost_plasma_cell_summary.html\nSummary report saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\06_annotation_boost\\results\\20251127_194028\\boost_plasma_cell_summary.html\n\nAnnotation Boost Results:\n  Status: success\n  Execution time: 28.4s\n  Summary report: boost_plasma_cell_summary.html\n  Raw conversation: boost_plasma_cell_raw_conversation.txt\n\n[OK] Test PASSED\n    Duration: 28.37s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "07_merging_annotation",
      "status": "passed",
      "returncode": 0,
      "duration": 8.54,
      "stdout": "etailed\n\u001b[4A\u001b[KAnnotation Merging \u2834\n\u001b[K[\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 0%\n\u001b[KCompleted: 0 | Processing: 3 | Pending: 0\n\u001b[KActive: detailed, broad, very_detailed\n\u001b[4A\u001b[KAnnotation Merging \u2826\n\u001b[K[\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 0%\n\u001b[KCompleted: 0 | Processing: 3 | Pending: 0\n\u001b[KActive: detailed, broad, very_detailed\n\u001b[4A\u001b[KAnnotation Merging \u2827\n\u001b[K[\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 0%\n\u001b[KCompleted: 0 | Processing: 3 | Pending: 0\n\u001b[KActive: detailed, broad, very_detailed\n\u001b[4A\u001b[KAnnotation Merging \u2807\n\u001b[K[\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 0%\n\u001b[KCompleted: 0 | Processing: 3 | Pending: 0\n\u001b[KActive: detailed, broad, very_detailed\n\u001b[4A\u001b[KAnnotation Merging \u280f\n\u001b[K[\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 0%\n\u001b[KCompleted: 0 | Processing: 3 | Pending: 0\n\u001b[KActive: detailed, broad, very_detailed\n\u001b[4A\u001b[KAnnotation Merging \u280b\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 33%\n\u001b[KCompleted: 1 | Processing: 2 | Pending: 0\n\u001b[KActive: broad, very_detailed\n\u001b[4A\u001b[KAnnotation Merging \u2819\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 67%\n\u001b[KCompleted: 2 | Processing: 1 | Pending: 0\n\u001b[KActive: broad\n\u001b[4A\u001b[KAnnotation Merging \u2839\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 67%\n\u001b[KCompleted: 2 | Processing: 1 | Pending: 0\n\u001b[KActive: broad\n\u001b[4A\u001b[KAnnotation Merging \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 3 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KAnnotation Merging \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 3 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25h  All levels merge: SUCCESS\n  Output rows: 2\n  Columns: Merged_Grouping_1, Merged_Grouping_2, Merged_Grouping_3\n\n  Sample comparison:\n    monocyte:\n      Broad:        Neural Cells\n      Detailed:     Schwann Cells\n      Very Detailed: Myelinating and Non-Myelinating Schwann cells\n    plasma cell:\n      Broad:        B cells\n      Detailed:     Plasma Cells\n      Very Detailed: Intestinal IgA plasma cells\n\n[OK] Test PASSED\n    Duration: 3.35s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "08_uncertainty_quantification",
      "status": "failed",
      "returncode": 1,
      "duration": 9.23,
      "stdout": "\n============================================================\n  CASSIA TEST: 08 - Uncertainty Quantification\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash\n  Tissue: large intestine\n  Species: human\nResults will be saved to: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\08_uncertainty_quantification\\results\\20251127_194110\n\n--- Test: runCASSIA_n_times_similarity_score ---\n  Cluster: plasma cell\n  Model: google/gemini-2.5-flash\n  Provider: openrouter\n  N iterations: 3 (reduced for testing)\nStarting 3 parallel analyses\nStarting analysis 1\nError in analysis 1: name 'runCASSIA' is not defined\nStarting analysis 2\nError in analysis 2: name 'runCASSIA' is not defined\nStarting analysis 3\nError in analysis 3: name 'runCASSIA' is not defined\nAll analyses completed in 0.00 seconds\n\nError: max() arg is an empty sequence\n\n[X] Test FAILED\n    Duration: 4.13s\n",
      "stderr": "ethod\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\nTraceback (most recent call last):\n  File \"C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\08_uncertainty_quantification\\test_uncertainty_quantification.py\", line 84, in run_uncertainty_quantification_test\n    result = runCASSIA_n_times_similarity_score(\n  File \"C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\uncertainty\\Uncertainty_quantification.py\", line 1341, in runCASSIA_n_times_similarity_score\n    consensus_score, consensus_1, consensus_2 = consensus_similarity_flexible_single(parsed_results,main_weight=main_weight,sub_weight=sub_weight)\n  File \"C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\uncertainty\\Uncertainty_quantification.py\", line 1203, in consensus_similarity_flexible_single\n    consensus_general = max(set(general_types), key=general_types.count)\nValueError: max() arg is an empty sequence\n"
    },
    {
      "name": "09_subclustering",
      "status": "passed",
      "returncode": 0,
      "duration": 12.76,
      "stdout": "\n============================================================\n  CASSIA TEST: 09 - Subclustering\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash\n  Tissue: large intestine\n  Species: human\nResults will be saved to: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\09_subclustering\\results\\20251127_194119\n\n--- Test: runCASSIA_subclusters ---\n  Major cluster: human large intestine immune cells\n  Subclusters to annotate: 3\n  Model: google/gemini-2.5-flash\n  Provider: openrouter\nUsing input dataframe directly as it appears to be pre-processed (2 columns)\nAnalysis text is already in structured format (list of 3 dictionaries)\nResults have been written to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\09_subclustering\\results\\20251127_194119\\subcluster_results.csv\nSubclustering HTML report saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\09_subclustering\\results\\20251127_194119\\subcluster_results.html\n\nSubclustering Results:\n  Output file: subcluster_results.csv\n  Subclusters annotated: 3\n\n  Sample annotations:\n    1: Enteric Neurons/Schwann Cells (Contamination) / Neural-like Stromal Cells\n    2: Plasma Cells / B cells (Plasmablasts)\n    3: Cytotoxic T cells (CD8+ T cells) / Gamma-delta T cells / NK cells\n  HTML report: subcluster_results.html\n\n[OK] Test PASSED\n    Duration: 7.87s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "10_symphony_compare",
      "status": "passed",
      "returncode": 0,
      "duration": 28.23,
      "stdout": "3, IGLC2, IGH...\n  Model preset: budget (cost-effective for testing)\n  Discussion: Disabled (for faster testing)\n\n\ud83c\udfbc CASSIA Symphony Compare - Orchestrating 3 AI Models\n============================================================\n\ud83d\udccd Tissue: human large intestine\n\ud83d\udd2c Comparing: Plasma cell, B cell, T cell\n\ud83e\uddec Markers: IGLL5, IGLV6-57, JCHAIN, FAM92B, IGLC3, IGLC2, IGHV3-7, IGKC, TNFRSF17, IGHG1, AC026369.3, IGHV3-23, IGKV4-1, IGKV1-5, IGHA1\n\ud83e\udd16 Models: Lovelace, Turing, Curie\n============================================================\n\n\ud83c\udfb5 Movement I: Initial Analysis (Parallel Processing)\nModel (initial): google/gemini-2.5-flash [OK]\nModel (initial): deepseek/deepseek-chat-v3-0324 [OK]\nModel (initial): x-ai/grok-3-mini-beta [OK]\n\n\u2705 Consensus reached! 100% agree on: Plasma cell\n\n\ud83c\udfb5 Movement III: Synthesis & Documentation\n  \ud83d\udcca Results saved to: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\10_symphony_compare\\results\\20251127_194133\\symphony_test.csv\nHTML report saved to C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\10_symphony_compare\\results\\20251127_194133\\symphony_test_report.html\n  \ud83c\udfa8 Interactive report: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\10_symphony_compare\\results\\20251127_194133\\symphony_test_report.html\n\n\ud83c\udfbc Symphony Complete!\n============================================================\n\ud83d\udcc8 Performance Summary:\n  \u2022 Models: 3 experts consulted\n  \u2022 Rounds: 1 total (1 initial + 0 discussion)\n  \u2022 Consensus: \u2705 Yes\n  \u2022 Winner: Plasma cell (confidence: 97.0%)\n\n\ud83d\udcca Detailed scores are available in the generated reports.\n\n--- Symphony Compare Results ---\n  Consensus: Plasma cell\n  Confidence: 97.0%\n  CSV file: symphony_test.csv\n  HTML report: symphony_test_report.html\n\n  Summary:\n    Models used: 3\n    Total rounds: 1\n    Consensus reached: True\n\n  Cell Type Scores:\n    Plasma cell: mean=97.0, range=[95.0-98.0]\n    B cell: mean=75.0, range=[65.0-85.0]\n    T cell: mean=5.0, range=[5.0-5.0]\n\n[OK] Test PASSED\n    Duration: 23.04s\n",
      "stderr": "ost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n[CASSIA WARNING] Could not convert score 'No score found' to number for cell type 'T cell'. This score will be excluded from analysis. Check if the LLM response format is correct.\nWARNING:CASSIA.CASSIA.evaluation.cell_type_comparison:Could not convert score 'No score found' to number for cell type 'T cell'. This score will be excluded from analysis. Check if the LLM response format is correct.\n[CASSIA WARNING] Could not convert score 'No score found' for 'T cell' from model 'google/gemini-2.5-flash'. Using 0 as fallback score. Check if the LLM response format is correct.\nWARNING:CASSIA.CASSIA.evaluation.cell_type_comparison:Could not convert score 'No score found' for 'T cell' from model 'google/gemini-2.5-flash'. Using 0 as fallback score. Check if the LLM response format is correct.\n"
    },
    {
      "name": "11_report_generation",
      "status": "failed",
      "returncode": 1,
      "duration": 0.53,
      "stdout": "",
      "stderr": "Traceback (most recent call last):\n  File \"C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\11_report_generation\\test_report_generation.py\", line 24, in <module>\n    from fixtures import get_cluster_markers, get_all_cluster_names\nImportError: cannot import name 'get_all_cluster_names' from 'fixtures' (C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\shared\\python\\fixtures.py)\n"
    },
    {
      "name": "12_batch_with_reference",
      "status": "failed",
      "returncode": 1,
      "duration": 7.28,
      "stdout": "\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 83%\n\u001b[KCompleted: 5 | Processing: 1 | Pending: 0\n\u001b[KActive: transit amplifying cell of large intestine\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 6 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 6 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25h\nWarning: 6 analysis/analyses failed:\n  - monocyte: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n  - plasma cell: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n  - cd8-positive, alpha-beta t cell: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n  - intestinal enteroendocrine cell: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n  - intestinal crypt stem cell: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n  - transit amplifying cell of large intestine: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n\n\nReference retrieval statistics:\n  - Used: 0\n  - Not needed: 0\n  - Errors: 6\n\nAll analyses completed. Results saved to 'C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_batch_with_reference\\results\\20251127_194201\\batch_ref_results'.\nWarning: Could not generate HTML report: No data provided\nTwo CSV files have been created:\n1. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_batch_with_reference\\results\\20251127_194201\\batch_ref_results_full.csv (full data)\n2. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_batch_with_reference\\results\\20251127_194201\\batch_ref_results_summary.csv (summary data)\n\nBatch with Reference Results:\n  Clusters annotated: 0/6\n  Reference column present: True\n  Reference usage: {}\n\n[X] Test FAILED\n    Duration: 2.12s\n",
      "stderr": "ERROR] All 2 attempts failed for cluster 'intestinal crypt stem cell'. Consider using a different model or reducing max_workers. Error: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\nERROR:CASSIA.CASSIA.core.llm_utils:All 2 attempts failed for cluster 'intestinal crypt stem cell'. Consider using a different model or reducing max_workers. Error: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n[CASSIA ERROR] All 2 attempts failed for cluster 'transit amplifying cell of large intestine'. Consider using a different model or reducing max_workers. Error: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\nERROR:CASSIA.CASSIA.core.llm_utils:All 2 attempts failed for cluster 'transit amplifying cell of large intestine'. Consider using a different model or reducing max_workers. Error: ReferenceAgent.get_reference_for_markers() got an unexpected keyword argument 'threshold'\n"
    },
    {
      "name": "12_scanpy_format",
      "status": "passed",
      "returncode": 0,
      "duration": 49.47,
      "stdout": " Analysis \u2807\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280f\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280b\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2819\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 8 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 8 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_scanpy_format\\results\\20251127_194208\\scanpy_batch_results'.\nHTML report generated: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_scanpy_format\\results\\20251127_194208\\scanpy_batch_results_report.html\nThree files have been created:\n1. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_scanpy_format\\results\\20251127_194208\\scanpy_batch_results_full.csv (full data CSV)\n2. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_scanpy_format\\results\\20251127_194208\\scanpy_batch_results_summary.csv (summary data CSV)\n3. C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\12_scanpy_format\\results\\20251127_194208\\scanpy_batch_results_report.html (interactive HTML report)\n\nBatch Results:\n  Clusters annotated: 8/8\n  Output files created:\n    - scanpy_batch_results_full.csv\n    - scanpy_batch_results_summary.csv\n\nDuration: 44.46s\n\nResult: PASSED\n\n============================================================\n\n[OK] Test PASSED\n    Total duration: 48.33s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    },
    {
      "name": "13_call_llm",
      "status": "failed",
      "returncode": 1,
      "duration": 8.36,
      "stdout": "N1Keq-wDk2SVM_tt9WSOnuTcZVG_wPl4vi-UMmM11Gpp4UFsA1cdmX17qmLPzJjupuNvmNAX8U4g-JwRAUgAA\nsk-tpx8NezgFiN_0bc_OTlGu8dR4frHKGhexTghwC9tZ9T3BlbkFJUivhCaisVncyPkFRkJCFSvROrZ0jNAlw0dHiU4EbYA\n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\nNone\nLoaded API keys from set_api_keys.py\n\n============================================================\n  CASSIA TEST: 13 - call_llm Provider Testing\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash\n  Tissue: large intestine\n  Species: human\nResults will be saved to: C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\13_call_llm\\results\\20251127_194258\n\n==================================================\nProvider: OpenAI\n  Model: gpt-4o\n==================================================\n  Status: API key found\n  Sending test prompt...\n  [OK] Response received (7 chars)\n  Response: success\n\n==================================================\nProvider: Anthropic\n  Model: claude-sonnet-4-5\n==================================================\n  Status: API key found\n  Sending test prompt...\n  [X] ERROR: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVZSQdNs5mJ2qSgFaN4kf'}\n\n==================================================\nProvider: OpenRouter\n  Model: google/gemini-2.5-flash\n==================================================\n  Status: API key found\n  Sending test prompt...\n  [OK] Response received (7 chars)\n  Response: success\n\n==================================================\nProvider: Custom (DeepSeek)\n  Model: deepseek-chat\n==================================================\n  Status: [SKIP] CUSTOMIZED_API_KEY not set in environment\n\n==================================================\nSUMMARY\n==================================================\n  Passed:  2/4\n  Failed:  1/4\n  Skipped: 1/4\n  Duration: 3.07s\n\n[X] Test FAILED\n    Duration: 3.07s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n[CASSIA ERROR] Authentication failed for anthropic. Please check your API key is valid. Set it with: CASSIA.set_api_key('anthropic', 'your-key')\nERROR:CASSIA.CASSIA.core.llm_utils:Authentication failed for anthropic. Please check your API key is valid. Set it with: CASSIA.set_api_key('anthropic', 'your-key')\n"
    },
    {
      "name": "14_input_validation",
      "status": "failed",
      "returncode": 1,
      "duration": 0.18,
      "stdout": "",
      "stderr": "Traceback (most recent call last):\n  File \"C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\Test\\14_input_validation\\test_input_validation.py\", line 32, in <module>\n    from validation import (\nModuleNotFoundError: No module named 'validation'\n"
    },
    {
      "name": "15_cassia_pipeline",
      "status": "passed",
      "returncode": 0,
      "duration": 29.0,
      "stdout": "ailed/Skipped: 0\n\u2713 Scoring process completed\n\n=== Creating final combined results ===\n\u2713 Final combined results saved to CASSIA_large_intestine_human_20251127_194307\\01_annotation_results\\pipeline_test_FINAL_RESULTS.csv\n\n=== Generating main reports ===\nHTML report generated: CASSIA_large_intestine_human_20251127_194307\\02_reports\\pipeline_test_report.html\n\u2713 Generated report: CASSIA_large_intestine_human_20251127_194307\\02_reports\\pipeline_test_report.html\nCleaned up redundant batch report: pipeline_test_report.html\n\u2713 Main reports generated\n\n=== Analyzing low-scoring clusters ===\nFound 0 clusters with scores below 75:\n[]\n\n=== Organizing intermediate files ===\nMoved pipeline_test_full.csv to intermediate_files folder\nMoved pipeline_test_summary.csv to intermediate_files folder\nMoved pipeline_test_sorted_full.csv to intermediate_files folder\nMoved pipeline_test_scored.csv to intermediate_files folder\nMoved pipeline_test_merged.csv to intermediate_files folder\n\u2713 Intermediate files organized\nRemoved original file: pipeline_test_full.csv\nRemoved original file: pipeline_test_summary.csv\n\n=== Cell type analysis pipeline completed ===\nAll results have been organized in the 'CASSIA_large_intestine_human_20251127_194307' folder:\n  \ud83d\udcca MAIN RESULTS: CASSIA_large_intestine_human_20251127_194307\\01_annotation_results\\pipeline_test_FINAL_RESULTS.csv\n  \ud83d\udcc1 HTML Reports: CASSIA_large_intestine_human_20251127_194307\\02_reports\n  \ud83d\udd0d Annotation Boost Results: CASSIA_large_intestine_human_20251127_194307\\03_boost_analysis\n  \ud83d\udcc2 Intermediate Files: CASSIA_large_intestine_human_20251127_194307\\01_annotation_results\\intermediate_files\n\n\u2705 Your final results are in: pipeline_test_FINAL_RESULTS.csv\n\nPipeline output directory: CASSIA_large_intestine_human_20251127_194307\n\nValidating output structure:\n  [OK] 01_annotation_results exists\n  [WARN] FINAL_RESULTS.csv not found\n  [OK] 02_reports exists\n       - Contains 1 HTML report(s)\n  [OK] 03_boost_analysis exists\n\n[OK] Test PASSED\n    Duration: 23.74s\n",
      "stderr": "C:\\Users\\ellio\\OneDrive - UW-Madison\\CASSIA_enjoy\\CASSIA\\CASSIA_python\\CASSIA\\agents\\annotation_boost\\super_annotation_boost.py:46: UserWarning: GSEApy not available - pathway enrichment will use simplified method\n  warnings.warn(\"GSEApy not available - pathway enrichment will use simplified method\")\n"
    }
  ]
}