{
  "timestamp": "2025-12-09T02:22:30.060399",
  "mode": "development",
  "language": "python",
  "version": "0.3.14",
  "location": "D:\\CASSIA\\CASSIA_python\\CASSIA",
  "total_duration": 612.72,
  "summary": {
    "passed": 9,
    "failed": 9,
    "errors": 0,
    "skipped": 0
  },
  "results": [
    {
      "name": "01_single_annotation",
      "status": "passed",
      "returncode": 0,
      "duration": 12.61,
      "stdout": "Using development CASSIA (local source)\n\n============================================================\n  CASSIA TEST: 01 - Single Cluster Annotation\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash-lite\n  Tissue: large intestine\n  Species: human\n\nTesting single annotation for: plasma cell\nUsing top 30 markers\nLoaded 30 markers\nResults will be saved to: D:\\CASSIA\\Test\\01_single_annotation\\results\\python\\development\\20251209_021221\nConsole output logging enabled: D:\\CASSIA\\Test\\01_single_annotation\\results\\python\\development\\20251209_021221\\logs\\test_log.txt\n\nRunning runCASSIA...\n\nAnnotation Result:\n  Main cell type: Plasma Cells\n  Sub cell types: ['Secretory Plasma Cells', 'Mucosal Plasma Cells (IgA-producing)', 'Long-lived Plasma Cells']\n\n[OK] Test PASSED\n    Duration: 7.17s\n\nConsole output saved to: D:\\CASSIA\\Test\\01_single_annotation\\results\\python\\development\\20251209_021221\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "02_batch_annotation",
      "status": "passed",
      "returncode": 0,
      "duration": 39.83,
      "stdout": "[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280b\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2819\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2839\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2838\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\02_batch_annotation\\results\\python\\development\\20251209_021234\\outputs\\batch_results'.\nHTML report generated: D:\\CASSIA\\Test\\02_batch_annotation\\results\\python\\development\\20251209_021234\\outputs\\batch_results_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\02_batch_annotation\\results\\python\\development\\20251209_021234\\outputs\\batch_results_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\02_batch_annotation\\results\\python\\development\\20251209_021234\\outputs\\batch_results_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\02_batch_annotation\\results\\python\\development\\20251209_021234\\outputs\\batch_results_report.html (interactive HTML report)\n\nBatch Results:\n  Clusters annotated: 2/2\n  Output files created:\n    - batch_results_summary.csv\n    - batch_results_conversations.json\n      (contains 2 cluster conversations)\n    - batch_results_report.html\n\n[OK] Test PASSED\n    Duration: 34.38s\n\nConsole output saved to: D:\\CASSIA\\Test\\02_batch_annotation\\results\\python\\development\\20251209_021234\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "03_validator_comparison",
      "status": "failed",
      "returncode": 1,
      "duration": 51.14,
      "stdout": "%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2819\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2839\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2838\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u283c\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\03_validator_comparison\\results\\python\\development\\20251209_021314\\outputs\\results_v1'.\nHTML report generated: D:\\CASSIA\\Test\\03_validator_comparison\\results\\python\\development\\20251209_021314\\outputs\\results_v1_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\03_validator_comparison\\results\\python\\development\\20251209_021314\\outputs\\results_v1_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\03_validator_comparison\\results\\python\\development\\20251209_021314\\outputs\\results_v1_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\03_validator_comparison\\results\\python\\development\\20251209_021314\\outputs\\results_v1_report.html (interactive HTML report)\n\n========================================\nComparison Results\n========================================\n  Could not compare - one or both validators failed\n\n[X] Test FAILED\n    Duration: 45.22s\n\nConsole output saved to: D:\\CASSIA\\Test\\03_validator_comparison\\results\\python\\development\\20251209_021314\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "04_quality_scoring",
      "status": "failed",
      "returncode": 1,
      "duration": 28.72,
      "stdout": "\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\batch_for_scoring'.\nHTML report generated: D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\batch_for_scoring_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\batch_for_scoring_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\batch_for_scoring_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\batch_for_scoring_report.html (interactive HTML report)\n\nRunning quality scoring...\nInput: D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\batch_for_scoring_full.csv\nOutput: D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\outputs\\scored_results.csv\nStarting scoring process with 3 workers using openrouter (google/gemini-2.5-flash-lite)...\nError in runCASSIA_score_batch: [Errno 2] No such file or directory: 'D:\\\\CASSIA\\\\Test\\\\04_quality_scoring\\\\results\\\\python\\\\development\\\\20251209_021405\\\\outputs\\\\batch_for_scoring_full.csv'\n\nError: [Errno 2] No such file or directory: 'D:\\\\CASSIA\\\\Test\\\\04_quality_scoring\\\\results\\\\python\\\\development\\\\20251209_021405\\\\outputs\\\\batch_for_scoring_full.csv'\n\n[X] Test FAILED\n    Duration: 0.00s\n\nConsole output saved to: D:\\CASSIA\\Test\\04_quality_scoring\\results\\python\\development\\20251209_021405\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "05_model_settings",
      "status": "passed",
      "returncode": 0,
      "duration": 4.9,
      "stdout": "nnet' + 'anthropic' -> 'claude-sonnet-4-5' (note)\n  [OK] 'opus' + 'anthropic' -> 'claude-opus-4-5' (note)\n  [OK] 'haiku' + 'anthropic' -> 'claude-haiku-4-5' (note)\n  [OK] '4o' + 'openai' -> 'gpt-4o' (note)\n  [OK] 'deepseek' + 'openrouter' -> 'deepseek/deepseek-chat' (note)\n  [OK] 'GPT' + 'openai' -> 'gpt-5.1' (note)\n  [OK] 'Claude' + 'anthropic' -> 'claude-sonnet-4-5' (note)\n  [OK] 'gpt-4o' + 'openai' -> 'gpt-4o' (no note)\n  [OK] 'claude-sonnet-4-5' + 'anthropic' -> 'claude-sonnet-4-5' (no note)\n\nAlias tests: 15/15 passed\n\n========================================\nTesting Provider-Aware Resolution\n========================================\n  [OK] 'claude' + 'anthropic' -> 'claude-sonnet-4-5' (expected: claude-sonnet-4-5)\n  [OK] 'claude' + 'openrouter' -> 'anthropic/claude-sonnet-4.5' (expected: anthropic/claude-sonnet-4.5)\n  [OK] 'gpt' + 'openai' -> 'gpt-5.1' (expected: gpt-5.1)\n  [OK] 'gpt' + 'openrouter' -> 'openai/gpt-5.1' (expected: openai/gpt-5.1)\n\nProvider-aware tests: 4/4 passed\n\n========================================\nTesting get_available_aliases()\n========================================\n  [OK] get_available_aliases() returns correct structure\n  [OK] get_available_aliases('openai') filters correctly\n\nTotal resolution tests: 27/27 passed\n\n========================================\nTesting Recommended Model\n========================================\n  Recommended for openrouter: ('anthropic/claude-sonnet-4.5', 'openrouter')\n\n========================================\nTesting Practical Annotation with OpenRouter\n========================================\n  Model: google/gemini-2.5-flash\n  Provider: openrouter\n  Running annotation...\n  [X] ERROR: CASSIA Validation Error: Invalid type for marker list. Expected list of strings or comma-separated string, got DataFrame.\n  Parameter: marker_list\n  Received: 'DataFrame'\n\n[OK] Test PASSED\n    Duration: 0.00s\n\nConsole output saved to: D:\\CASSIA\\Test\\05_model_settings\\results\\python\\development\\20251209_021433\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "06_annotation_boost",
      "status": "failed",
      "returncode": 1,
      "duration": 18.79,
      "stdout": "\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u283c\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2834\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2826\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2827\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2807\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280f\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\06_annotation_boost\\results\\python\\development\\20251209_021438\\outputs\\batch_for_boost'.\nHTML report generated: D:\\CASSIA\\Test\\06_annotation_boost\\results\\python\\development\\20251209_021438\\outputs\\batch_for_boost_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\06_annotation_boost\\results\\python\\development\\20251209_021438\\outputs\\batch_for_boost_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\06_annotation_boost\\results\\python\\development\\20251209_021438\\outputs\\batch_for_boost_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\06_annotation_boost\\results\\python\\development\\20251209_021438\\outputs\\batch_for_boost_report.html (interactive HTML report)\n",
      "stderr": "\\pandas\\io\\parsers\\readers.py\", line 948, in read_csv\n    return _read(filepath_or_buffer, kwds)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\anaconda3\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 611, in _read\n    parser = TextFileReader(filepath_or_buffer, **kwds)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\anaconda3\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 1448, in __init__\n    self._engine = self._make_engine(f, self.engine)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\anaconda3\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 1705, in _make_engine\n    self.handles = get_handle(\n                   ^^^^^^^^^^^\n  File \"D:\\anaconda3\\Lib\\site-packages\\pandas\\io\\common.py\", line 863, in get_handle\n    handle = open(\n             ^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\CASSIA\\\\Test\\\\06_annotation_boost\\\\results\\\\python\\\\development\\\\20251209_021438\\\\outputs\\\\batch_for_boost_full.csv'\n"
    },
    {
      "name": "07_merging_annotation",
      "status": "failed",
      "returncode": 1,
      "duration": 26.56,
      "stdout": "\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2839\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2838\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u283c\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\07_merging_annotation\\results\\python\\development\\20251209_021457\\outputs\\batch_for_merge'.\nHTML report generated: D:\\CASSIA\\Test\\07_merging_annotation\\results\\python\\development\\20251209_021457\\outputs\\batch_for_merge_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\07_merging_annotation\\results\\python\\development\\20251209_021457\\outputs\\batch_for_merge_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\07_merging_annotation\\results\\python\\development\\20251209_021457\\outputs\\batch_for_merge_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\07_merging_annotation\\results\\python\\development\\20251209_021457\\outputs\\batch_for_merge_report.html (interactive HTML report)\n\n--- Test 1: Single detail level merge (broad) ---\n\nError: Error reading CSV file: [Errno 2] No such file or directory: 'D:\\\\CASSIA\\\\Test\\\\07_merging_annotation\\\\results\\\\python\\\\development\\\\20251209_021457\\\\outputs\\\\batch_for_merge_full.csv'\n\n[X] Test FAILED\n    Duration: 0.00s\n\nConsole output saved to: D:\\CASSIA\\Test\\07_merging_annotation\\results\\python\\development\\20251209_021457\\logs\\test_log.txt\n",
      "stderr": "andle(\n                   ^^^^^^^^^^^\n  File \"D:\\anaconda3\\Lib\\site-packages\\pandas\\io\\common.py\", line 863, in get_handle\n    handle = open(\n             ^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\CASSIA\\\\Test\\\\07_merging_annotation\\\\results\\\\python\\\\development\\\\20251209_021457\\\\outputs\\\\batch_for_merge_full.csv'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\CASSIA\\Test\\07_merging_annotation\\test_merging_annotation.py\", line 114, in run_merging_annotation_test\n    result_broad = merge_annotations(\n                   ^^^^^^^^^^^^^^^^^^\n  File \"D:\\CASSIA\\CASSIA_python\\CASSIA\\agents\\merging\\merging_annotation.py\", line 65, in merge_annotations\n    raise ValueError(f\"Error reading CSV file: {str(e)}\")\nValueError: Error reading CSV file: [Errno 2] No such file or directory: 'D:\\\\CASSIA\\\\Test\\\\07_merging_annotation\\\\results\\\\python\\\\development\\\\20251209_021457\\\\outputs\\\\batch_for_merge_full.csv'\n"
    },
    {
      "name": "08_uncertainty_quantification",
      "status": "passed",
      "returncode": 0,
      "duration": 34.52,
      "stdout": "Using development CASSIA (local source)\n\n============================================================\n  CASSIA TEST: 08 - Uncertainty Quantification\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash-lite\n  Tissue: large intestine\n  Species: human\nResults will be saved to: D:\\CASSIA\\Test\\08_uncertainty_quantification\\results\\python\\development\\20251209_021524\nConsole output logging enabled: D:\\CASSIA\\Test\\08_uncertainty_quantification\\results\\python\\development\\20251209_021524\\logs\\test_log.txt\n\n--- Test: runCASSIA_n_times_similarity_score ---\n  Cluster: plasma cell\n  Model: google/gemini-2.5-flash-lite\n  Provider: openrouter\n  N iterations: 5\nStarting 5 parallel analyses\nStarting analysis 1\nStarting analysis 2Starting analysis 3\n\nFinished analysis 3 in 7.02 seconds\nStarting analysis 4\nFinished analysis 1 in 7.38 seconds\nStarting analysis 5\nFinished analysis 2 in 8.72 seconds\nFinished analysis 4 in 7.18 seconds\nFinished analysis 5 in 9.83 seconds\nAll analyses completed in 17.21 seconds\nUncertainty quantification report saved to: D:\\CASSIA\\Test\\08_uncertainty_quantification\\results\\python\\development\\20251209_021524\\outputs\\uq_single_report.html\n  HTML report created: uq_single_report.html\n\nResults:\n  General cell type (LLM): plasma cell\n  Sub cell type (LLM): IgA plasma cell\n  Similarity score: 0.5\n  Consensus types: ('Plasma Cells', 'IgA-producing Plasma Cells')\n\n--- Skipping Test: runCASSIA_batch_n_times (using pre-existing data) ---\n  Warning: Only found 0 batch files in D:\\CASSIA\\Test\\08_uncertainty_quantification\\data\n  Expected files: batch_results_1_summary.csv through batch_results_5_summary.csv\n\n--- Test: runCASSIA_similarity_score_batch ---\n  Analyzing batch results\n  Skipping - no batch files found\n\n[OK] Test PASSED\n    Duration: 29.41s\n\nConsole output saved to: D:\\CASSIA\\Test\\08_uncertainty_quantification\\results\\python\\development\\20251209_021524\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "09_subclustering",
      "status": "passed",
      "returncode": 0,
      "duration": 12.5,
      "stdout": "Using development CASSIA (local source)\n\n============================================================\n  CASSIA TEST: 09 - Subclustering\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash-lite\n  Tissue: large intestine\n  Species: human\nResults will be saved to: D:\\CASSIA\\Test\\09_subclustering\\results\\python\\development\\20251209_021558\nConsole output logging enabled: D:\\CASSIA\\Test\\09_subclustering\\results\\python\\development\\20251209_021558\\logs\\test_log.txt\n\n--- Test: runCASSIA_subclusters ---\n  Major cluster: human large intestine immune cells\n  Subclusters to annotate: 2\n  Model: google/gemini-2.5-flash-lite\n  Provider: openrouter\nUsing input dataframe directly as it appears to be pre-processed (2 columns)\nWarning: Could not extract results in expected format. Results type: <class 'str'>\nSaving raw results to D:\\CASSIA\\Test\\09_subclustering\\results\\python\\development\\20251209_021558\\outputs\\subcluster_results.csv.txt for inspection\nNo score column found in D:\\CASSIA\\Test\\09_subclustering\\results\\python\\development\\20251209_021558\\outputs\\subcluster_results.csv. Skipping.\n\nSubclustering Results:\n  Output file: subcluster_results.csv\n  Subclusters annotated: 1\n\n  Sample annotations:\n    1: Unknown / Unknown\n\n[OK] Test PASSED\n    Duration: 7.36s\n\nConsole output saved to: D:\\CASSIA\\Test\\09_subclustering\\results\\python\\development\\20251209_021558\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "10_symphony_compare",
      "status": "passed",
      "returncode": 0,
      "duration": 37.91,
      "stdout": "\n============================================================\n\ud83d\udccd Tissue: human large intestine\n\ud83d\udd2c Comparing: Plasma cell, B cell, T cell\n\ud83e\uddec Markers: IGLL5, IGLV6-57, JCHAIN, FAM92B, IGLC3, IGLC2, IGHV3-7, IGKC, TNFRSF17, IGHG1, AC026369.3, IGHV3-23, IGKV4-1, IGKV1-5, IGHA1\n\ud83e\udd16 Models: Turing, Tesla, Lovelace, Franklin\n\ud83d\udca1 Tip: For better performance, use model_preset='premium'\n============================================================\n\n\ud83c\udfb5 Movement I: Initial Analysis (Parallel Processing)\nModel (initial): google/gemini-2.5-flash [OK]\nModel (initial): x-ai/grok-4-fast [OK]\nModel (initial): deepseek/deepseek-v3.2 [OK]\nModel (initial): moonshotai/kimi-k2-thinking [OK]\n\n\u2705 Consensus reached! 100% agree on: Plasma cell\n\n\ud83c\udfb5 Movement III: Synthesis & Documentation\n  \ud83d\udcca Results saved to: D:\\CASSIA\\Test\\10_symphony_compare\\results\\python\\development\\20251209_021611\\outputs\\symphony_test.csv\nHTML report saved to D:\\CASSIA\\Test\\10_symphony_compare\\results\\python\\development\\20251209_021611\\outputs\\symphony_test_report.html\n  \ud83c\udfa8 Interactive report: D:\\CASSIA\\Test\\10_symphony_compare\\results\\python\\development\\20251209_021611\\outputs\\symphony_test_report.html\n\n\ud83c\udfbc Symphony Complete!\n============================================================\n\ud83d\udcc8 Performance Summary:\n  \u2022 Models: 4 experts consulted\n  \u2022 Rounds: 1 total (1 initial + 0 discussion)\n  \u2022 Consensus: \u2705 Yes\n  \u2022 Winner: Plasma cell (confidence: 95.8%)\n\n\ud83d\udcca Detailed scores are available in the generated reports.\n\n--- Symphony Compare Results ---\n  Consensus: Plasma cell\n  Confidence: 95.8%\n  CSV file: symphony_test.csv\n  HTML report: symphony_test_report.html\n\n  Summary:\n    Models used: 4\n    Total rounds: 1\n    Consensus reached: True\n\n  Cell Type Scores:\n    Plasma cell: mean=95.8, range=[95.0-98.0]\n    B cell: mean=57.5, range=[30.0-85.0]\n    T cell: mean=2.5, range=[0.0-5.0]\n\n[OK] Test PASSED\n    Duration: 33.02s\n\nConsole output saved to: D:\\CASSIA\\Test\\10_symphony_compare\\results\\python\\development\\20251209_021611\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "11_report_generation",
      "status": "passed",
      "returncode": 0,
      "duration": 4.78,
      "stdout": "Using development CASSIA (local source)\n\n============================================================\n  CASSIA TEST: 11 - Report Generation\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash-lite\n  Tissue: large intestine\n  Species: human\nResults will be saved to: D:\\CASSIA\\Test\\11_report_generation\\results\\python\\development\\20251209_021648\nConsole output logging enabled: D:\\CASSIA\\Test\\11_report_generation\\results\\python\\development\\20251209_021648\\logs\\test_log.txt\n\n--- Test 1: Find existing batch results ---\n  No existing batch results found\n  Will create sample data for testing\n\n--- Test 3: Generate HTML report from data ---\n  Created sample data: 2 clusters\nHTML report generated: D:\\CASSIA\\Test\\11_report_generation\\results\\python\\development\\20251209_021648\\outputs\\test_report_from_data.html\n  Generated: test_report_from_data.html\n  File size: 47.6 KB\n\n--- Test 4: Validate HTML content ---\n  Validation results:\n    DOCTYPE: PASS\n    report_header: PASS\n    cluster_cards: PASS\n    search_functionality: PASS\n    filter_dropdowns: PASS\n    modal_popups: PASS\n    javascript: PASS\n    css_styles: PASS\n\n--- Report Generation Summary ---\n  Data Report: test_report_from_data.html\n  Validation: PASSED\n\n[OK] Test PASSED\n    Duration: 0.04s\n\nConsole output saved to: D:\\CASSIA\\Test\\11_report_generation\\results\\python\\development\\20251209_021648\\logs\\test_log.txt\n",
      "stderr": ""
    },
    {
      "name": "12_batch_with_reference",
      "status": "failed",
      "returncode": 1,
      "duration": 15.48,
      "stdout": "ing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2838\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u283c\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2834\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2826\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2827\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\12_batch_with_reference\\results\\python\\development\\20251209_021653\\outputs\\batch_ref_results'.\nHTML report generated: D:\\CASSIA\\Test\\12_batch_with_reference\\results\\python\\development\\20251209_021653\\outputs\\batch_ref_results_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\12_batch_with_reference\\results\\python\\development\\20251209_021653\\outputs\\batch_ref_results_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\12_batch_with_reference\\results\\python\\development\\20251209_021653\\outputs\\batch_ref_results_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\12_batch_with_reference\\results\\python\\development\\20251209_021653\\outputs\\batch_ref_results_report.html (interactive HTML report)\n\n[X] Test FAILED\n    Duration: 10.65s\n\nConsole output saved to: D:\\CASSIA\\Test\\12_batch_with_reference\\results\\python\\development\\20251209_021653\\logs\\test_log.txt\n",
      "stderr": "D:\\CASSIA\\Test\\12_batch_with_reference\\test_batch_with_reference.py:62: DeprecationWarning: runCASSIA_batch_with_reference is deprecated. Use runCASSIA_batch(use_reference=True) instead.\n  runCASSIA_batch_with_reference(\n"
    },
    {
      "name": "12_scanpy_format",
      "status": "failed",
      "returncode": 1,
      "duration": 88.72,
      "stdout": "[KCASSIA Batch Analysis \u2826\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2827\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2807\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u280f\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591] 88%\n\u001b[KCompleted: 7 | Processing: 1 | Pending: 0\n\u001b[KActive: Megakaryocytes\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 8 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 8 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\12_scanpy_format\\results\\python\\development\\20251209_021739\\outputs\\scanpy_df_batch_results'.\nHTML report generated: D:\\CASSIA\\Test\\12_scanpy_format\\results\\python\\development\\20251209_021739\\outputs\\scanpy_df_batch_results_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\12_scanpy_format\\results\\python\\development\\20251209_021739\\outputs\\scanpy_df_batch_results_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\12_scanpy_format\\results\\python\\development\\20251209_021739\\outputs\\scanpy_df_batch_results_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\12_scanpy_format\\results\\python\\development\\20251209_021739\\outputs\\scanpy_df_batch_results_report.html (interactive HTML report)\n\nDuration: 53.86s\n\nConsole output saved to: D:\\CASSIA\\Test\\12_scanpy_format\\results\\python\\development\\20251209_021739\\logs\\test_log.txt\n\nResult: FAILED\n\n============================================================\n\n[X] Test FAILED\n    Total duration: 87.41s\n\nErrors encountered:\n  - Output file not created\n  - Output file not created\n",
      "stderr": ""
    },
    {
      "name": "13_call_llm",
      "status": "failed",
      "returncode": 1,
      "duration": 8.12,
      "stdout": "95f6ffc7c5311833a38f0e0e75e6376653b0b9e\nNone\nLoaded API keys from set_api_keys.py\n\n============================================================\n  CASSIA TEST: 13 - call_llm Provider Testing\n============================================================\n\nConfiguration:\n  Provider: openrouter\n  Model: google/gemini-2.5-flash-lite\n  Tissue: large intestine\n  Species: human\nResults will be saved to: {'base': WindowsPath('D:/CASSIA/Test/13_call_llm/results/python/development/20251209_021838'), 'logs': WindowsPath('D:/CASSIA/Test/13_call_llm/results/python/development/20251209_021838/logs'), 'outputs': WindowsPath('D:/CASSIA/Test/13_call_llm/results/python/development/20251209_021838/outputs')}\n\n==================================================\nProvider: OpenAI\n  Model: gpt-4o\n==================================================\n  Status: API key found\n  Sending test prompt...\n  [OK] Response received (7 chars)\n  Response: success\n\n==================================================\nProvider: Anthropic\n  Model: claude-sonnet-4-5\n==================================================\n  Status: API key found\n  Sending test prompt...\n  [X] ERROR: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'Your credit balance is too low to access the Anthropic API. Please go to Plans & Billing to upgrade or purcha...\n\n==================================================\nProvider: OpenRouter\n  Model: google/gemini-2.5-flash\n==================================================\n  Status: API key found\n  Sending test prompt...\n  [OK] Response received (7 chars)\n  Response: success\n\n==================================================\nProvider: Custom (DeepSeek)\n  Model: deepseek-chat\n==================================================\n  Status: [SKIP] CUSTOMIZED_API_KEY not set in environment\n\n==================================================\nSUMMARY\n==================================================\n  Passed:  2/4\n  Failed:  1/4\n  Skipped: 1/4\n  Duration: 2.71s\n",
      "stderr": "[CASSIA ERROR] Insufficient API credits for anthropic. Please check your account balance and billing settings.\nERROR:CASSIA.CASSIA.core.llm_utils:Insufficient API credits for anthropic. Please check your account balance and billing settings.\nTraceback (most recent call last):\n  File \"D:\\CASSIA\\Test\\13_call_llm\\test_call_llm.py\", line 202, in <module>\n    success = run_call_llm_test()\n              ^^^^^^^^^^^^^^^^^^^\n  File \"D:\\CASSIA\\Test\\13_call_llm\\test_call_llm.py\", line 191, in run_call_llm_test\n    save_test_metadata(results_dir, metadata)\n  File \"D:\\CASSIA\\Test\\shared\\python\\result_manager.py\", line 227, in save_test_metadata\n    metadata_path = results_dir / \"test_metadata.json\"\n                    ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~\nTypeError: unsupported operand type(s) for /: 'dict' and 'str'\n"
    },
    {
      "name": "14_input_validation",
      "status": "passed",
      "returncode": 0,
      "duration": 5.47,
      "stdout": "K] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n==================================================\nTesting Tissue/Species Validation\n==================================================\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n==================================================\nTesting Provider Validation\n==================================================\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n==================================================\nTesting Model Validation\n==================================================\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n==================================================\nTesting Batch Parameter Validation\n==================================================\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n==================================================\nTesting Integrated runCASSIA Validation\n==================================================\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n[OK] Test PASSED\n    True\n\n==================================================\nTEST SUMMARY\n==================================================\nTests passed: 54\nTests failed: 0\nTotal tests:  54\n\n*** ALL TESTS PASSED ***\n",
      "stderr": "D:\\CASSIA\\CASSIA_python\\CASSIA\\core\\validation.py:128: UserWarning: Only 3 markers provided. Recommended minimum is 50 markers for reliable cell type annotation. Results may be less accurate with fewer markers.\n  warnings.warn(\n"
    },
    {
      "name": "15_cassia_pipeline",
      "status": "passed",
      "returncode": 0,
      "duration": 73.69,
      "stdout": "sma cell_boosted_raw_conversation.txt\nRaw conversation text saved to .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\02_annotation_boost\\plasma cell\\pipeline_test_plasma cell_boosted_raw_conversation.txt\nHTML report saved to .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\02_annotation_boost\\plasma cell\\pipeline_test_plasma cell_boosted_summary.html\nSummary report saved to .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\02_annotation_boost\\plasma cell\\pipeline_test_plasma cell_boosted_summary.html\nSummary report saved to .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\02_annotation_boost\\plasma cell\\pipeline_test_plasma cell_boosted_summary.html\n\u2713 Boost annotation completed\nRemoved original file: pipeline_test_summary.csv\nRemoved original file: pipeline_test_conversations.json\n\n=== Cell type analysis pipeline completed ===\nAll results have been organized in the '.\\CASSIA_Pipeline_large_intestine_human_20251209_021852' folder:\n  \ud83d\udcca MAIN RESULTS: .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\03_csv_files\\pipeline_test_FINAL_RESULTS.csv\n  \ud83d\udcc1 HTML Report: .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\01_annotation_report\n  \ud83d\udd0d Annotation Boost Results: .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\02_annotation_boost\n  \ud83d\udcc2 CSV Files: .\\CASSIA_Pipeline_large_intestine_human_20251209_021852\\03_csv_files\n\n\u2705 Your final results are in: pipeline_test_FINAL_RESULTS.csv\n\nPipeline output directory: CASSIA_Pipeline_large_intestine_human_20251209_021852\n\nValidating output structure:\n  [OK] 01_annotation_report exists\n       - Contains 1 HTML report(s)\n  [OK] 02_annotation_boost exists\n       - Contains 2 cluster folder(s)\n  [OK] 03_csv_files exists\n  [OK] FINAL_RESULTS.csv exists: pipeline_test_FINAL_RESULTS.csv\n       - Contains 2 rows\n       - Contains 5 CSV file(s)\n\n[OK] Test PASSED\n    Duration: 68.32s\n\nConsole output saved to: D:\\CASSIA\\Test\\15_cassia_pipeline\\results\\python\\development\\20251209_021851\\logs\\test_log.txt\n",
      "stderr": "D:\\CASSIA\\Test\\15_cassia_pipeline\\test_cassia_pipeline.py:1: SyntaxWarning: invalid escape sequence '\\C'\n  \"\"\"\n"
    },
    {
      "name": "17_api_validation",
      "status": "failed",
      "returncode": 1,
      "duration": 13.39,
      "stdout": "========================================\nTest 1: Basic API Key Validation\n============================================================\n\nTesting openai...\n  Result: INVALID\n  Duration: 1.514s\n\nTesting anthropic...\n  Result: INVALID\n  Duration: 0.344s\n\nTesting openrouter...\n  Result: VALID\n  Duration: 1.462s\n\n============================================================\nTest 2: Caching Behavior\n============================================================\n\nUsing provider: openai\n\nFirst validation (should make API call)...\n  Duration: 1.230s\n\nSecond validation (should use cache)...\n  Duration: 0.327s\n\nCache performance:\n  First call:  1.230s (API call)\n  Second call: 0.327143s (cached)\n  Speedup: 4x\n  Cache working: NO\n\n============================================================\nTest 3: Force Revalidation\n============================================================\n\nUsing provider: openai\n\nFirst validation...\n\nForced revalidation (should make API call even though cached)...\n  Duration: 1.501s\n  API call made: YES\n\n============================================================\nTest 4: Invalid API Key\n============================================================\n\nTesting with fake API key...\n  [OK] Invalid key correctly detected\n\n============================================================\nTest 5: Missing API Key\n============================================================\n\nTesting with no API key set...\n  [OK] Missing key correctly detected\n\n============================================================\nTest 6: Thread Safety\n============================================================\n\nUsing provider: openai\n\nRunning 5 concurrent validations...\n  Results: [False, False, False, False, False]\n  All consistent: YES\n  All valid: NO\n  Duration: 1.198s\n\n============================================================\nSUMMARY\n============================================================\n  Passed:  3/6\n  Failed:  2/6\n  Skipped: 0/6\n  Duration: 12.41s\n\n[X] Test FAILED\n    Duration: 12.41s\n",
      "stderr": "'max_completion_tokens'\n[CASSIA INFO] Retrying with max_completion_tokens for model gpt-5-nano\nINFO:CASSIA.CASSIA.core.llm_utils:Retrying with max_completion_tokens for model gpt-5-nano\n[CASSIA ERROR] API call to openai failed with model 'gpt-5-nano'. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\nERROR:CASSIA.CASSIA.core.llm_utils:API call to openai failed with model 'gpt-5-nano'. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\n[CASSIA INFO] Retrying with max_completion_tokens for model gpt-5-nano\nINFO:CASSIA.CASSIA.core.llm_utils:Retrying with max_completion_tokens for model gpt-5-nano\n[CASSIA ERROR] API call to openai failed with model 'gpt-5-nano'. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\nERROR:CASSIA.CASSIA.core.llm_utils:API call to openai failed with model 'gpt-5-nano'. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\n"
    },
    {
      "name": "18_reasoning_effort",
      "status": "failed",
      "returncode": 1,
      "duration": 135.59,
      "stdout": "nalysis \u280b\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2819\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591] 50%\n\u001b[KCompleted: 1 | Processing: 1 | Pending: 0\n\u001b[KActive: monocyte\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[4A\u001b[KCASSIA Batch Analysis \u2713\n\u001b[K[\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588] 100%\n\u001b[KCompleted: 2 | Processing: 0 | Pending: 0\n\u001b[KActive: None\n\u001b[K\n\u001b[?25hAll analyses completed. Results saved to 'D:\\CASSIA\\Test\\18_reasoning_effort\\results\\python\\development\\20251209_022014\\outputs\\batch_openrouter_low'.\nHTML report generated: D:\\CASSIA\\Test\\18_reasoning_effort\\results\\python\\development\\20251209_022014\\outputs\\batch_openrouter_low_report.html\nThree files have been created:\n1. D:\\CASSIA\\Test\\18_reasoning_effort\\results\\python\\development\\20251209_022014\\outputs\\batch_openrouter_low_summary.csv (summary CSV)\n2. D:\\CASSIA\\Test\\18_reasoning_effort\\results\\python\\development\\20251209_022014\\outputs\\batch_openrouter_low_conversations.json (conversation history JSON)\n3. D:\\CASSIA\\Test\\18_reasoning_effort\\results\\python\\development\\20251209_022014\\outputs\\batch_openrouter_low_report.html (interactive HTML report)\n\nDuration: 104.45s\nStatus: FAILED\n\n======================================================================\nSUMMARY\n======================================================================\n\nTest 1 (GPT-4o, Chat Completions):      PASSED (22.70s)\nTest 2 (GPT-5.1, Chat Completions):     FAILED (0.39s)\nTest 3 (GPT-5, Responses API):          SKIPPED (org verification)\nTest 4 (Batch GPT-5.1, no reasoning):   FAILED (2.51s)\nTest 5 (OpenRouter, effort=LOW):        FAILED (104.45s)\n\nTotal Duration: 134.24s\n\n[X] Test FAILED\n    Total Duration: 134.24s\n\nConsole output saved to: D:\\CASSIA\\Test\\18_reasoning_effort\\results\\python\\development\\20251209_022014\\logs\\test_log.txt\n",
      "stderr": "rror: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\n[CASSIA INFO] Retrying with max_completion_tokens for model gpt-5.1\nINFO:CASSIA.CASSIA.core.llm_utils:Retrying with max_completion_tokens for model gpt-5.1\n[CASSIA ERROR] API call to openai failed with model 'gpt-5.1'. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\nERROR:CASSIA.CASSIA.core.llm_utils:API call to openai failed with model 'gpt-5.1'. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\n[CASSIA ERROR] All 2 attempts failed for cluster 'plasma cell'. Consider using a different model or reducing max_workers. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\nERROR:CASSIA.CASSIA.core.llm_utils:All 2 attempts failed for cluster 'plasma cell'. Consider using a different model or reducing max_workers. Error: Completions.create() got an unexpected keyword argument 'max_completion_tokens'\n"
    }
  ]
}