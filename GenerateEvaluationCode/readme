Here's an introduction for new users to this code space, briefly grouping and describing each function and the workflow:

# Introduction to Single-Cell RNA-Seq Analysis Workflow

This code space provides a comprehensive workflow for analyzing single-cell RNA sequencing (scRNA-seq) data, with a focus on cell type annotation using GPT models. The functions are organized into several main groups:

## 1. Data Processing and Marker Gene Extraction

- `process_tissue_data(adata, tissue)`: Processes AnnData object for a specific tissue.
- `analyze_and_export_markers(adata, annotation_levels, n_genes)`: Analyzes and exports marker genes for different annotation levels.
- `process_multiple_tissues(adata, tissues, n_genes)`: Processes multiple tissues and generates marker genes for each.

## 2. Cell Type Analysis with GPT Models

- `run_cell_type_analysis(model, temperature, marker_list, tissue, species, additional_info)`: Performs cell type analysis using GPT models.
- `run_cell_type_analysis_with_summary(...)`: Similar to above, but includes a summary of the analysis.
- `run_cell_type_analysis_tissue_blind(...)`: Performs analysis without prior knowledge of tissue type.

## 3. Batch Processing Functions

- `run_cell_type_analysis_batchrun(...)`: Runs cell type analysis for multiple cell types in a dataset.
- `run_cell_type_analysis_batchrun_tissue_blind(...)`: Batch run for tissue-blind analysis.
- `run_analysis_for_tissues(...)` and `run_analysis_for_tissues_granular(...)`: Run analysis for multiple tissues with different granularity levels.

## 4. Result Processing and Evaluation

- `create_csv_from_json(json_filename)`: Converts JSON results to CSV format.
- `evaluate_annotation(prompt, system_prompt, ...)`: Evaluates the accuracy of cell type annotations.

## Workflow

1. Start by processing your scRNA-seq data using the data processing functions.
2. Use the batch processing functions to run cell type analysis on your processed data.
3. The analysis will use GPT models to predict cell types based on marker genes.
4. Results are saved in JSON format, which can then be converted to CSV for easier analysis.
5. Use the evaluation function to assess the accuracy of the annotations.

This workflow allows for flexible analysis of scRNA-seq data, with options for tissue-specific or tissue-blind analysis, and different levels of annotation granularity.